<!--
    Locals: {
        user,
        title,
        description,
        assessment_id,
        user_modules
    }
-->

<%- include('../partials/header.ejs', { loggedIn }) %>

    <div class="container">
        <!-- container begin -->

        <div class="display-5 text-center my-2">
            <%= title %>
        </div>

        <div class="p">
            <%= description %>
        </div>

        <% user_modules.map(module=> { %>

            <div class="bg-light row p-3 my-2">
                <!-- row being -->

                <!-- module name -->
                <div class="col-md-4 col-lg-3">
                    <%= module.module_name %>
                </div>

                <!-- status -->
                <div class="col-md-3 col-lg-2 
                    <%- module.status === 'Pending' ? 'text-danger' : 'text-primary' %>"
                >
                    <%= module.status %>
                </div>

                <!-- question stats -->
                <div class="col-md-3 col-lg-2 text-muted">
                    <!-- 5/10 Questions -->
                    <%= module.no_attempted %>/<%= module.no_questions %> questions
                </div>

                <!-- time stats -->
                <div class="col-md-3 col-lg-2 text-secondary">
                    <%= module.time_spent %>min
                </div>

                <!-- action -->
                <div class="col-md-4 col-lg-3">
                    <!-- open module form -->
                    <a href="/forms/<%= assessment_id %>/questions/<%= module._id %>"
                        class="btn btn-dark">Open</a>
                </div>

                <!-- row end -->
            </div>

            <% }) %>

                <!-- submit assessment -->
                <form action="/forms/<%= assessment_id %>/score" method="POST">

                    <!-- assessment id field -->
                    <input type="text" name="assessment_id" value="<%= assessment_id %>" hidden />

                    <p class="form-text-muted">
                        Please attempt all modules in this assessment before you submit.
                    </p>

                    <input type="submit" class="btn btn-primary" value="Submit All">

                </form>

                <!-- container end -->
    </div>
    <%- include('../partials/footer.ejs') %>